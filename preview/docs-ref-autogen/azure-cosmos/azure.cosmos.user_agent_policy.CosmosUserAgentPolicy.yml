### YamlMime:PythonClass
uid: azure.cosmos.user_agent_policy.CosmosUserAgentPolicy
name: CosmosUserAgentPolicy
fullName: azure.cosmos.user_agent_policy.CosmosUserAgentPolicy
module: azure.cosmos.user_agent_policy
summary: 'Custom user agent policy for Cosmos DB that appends feature flags to the
  user agent string.


  This policy extends the standard UserAgentPolicy to include Cosmos-specific feature
  flags

  (e.g., circuit breaker, per-partition automatic failover) in the user agent header
  for

  debugging and telemetry purposes.'
constructor:
  syntax: 'CosmosUserAgentPolicy(base_user_agent: str | None = None, **kwargs: Any)'
  parameters:
  - name: base_user_agent
    defaultValue: None
methods:
- uid: azure.cosmos.user_agent_policy.CosmosUserAgentPolicy.add_user_agent
  name: add_user_agent
  summary: Add value to current user agent with a space.
  signature: 'add_user_agent(value: str) -> None'
  parameters:
  - name: value
    description: value to add to user agent.
    isRequired: true
    types:
    - <xref:str>
- uid: azure.cosmos.user_agent_policy.CosmosUserAgentPolicy.on_exception
  name: on_exception
  summary: 'Is executed if an exception is raised while executing the next policy.


    This method is executed inside the exception handler.'
  signature: 'on_exception(request: PipelineRequest[HTTPRequestType]) -> None'
  parameters:
  - name: request
    description: The Pipeline request object
    isRequired: true
    types:
    - <xref:azure.core.pipeline.PipelineRequest>
- uid: azure.cosmos.user_agent_policy.CosmosUserAgentPolicy.on_request
  name: on_request
  summary: Modifies the User-Agent header before the request is sent.
  signature: 'on_request(request: PipelineRequest[HttpRequest | HttpRequest]) -> None'
  parameters:
  - name: request
    description: The PipelineRequest object
    isRequired: true
    types:
    - <xref:azure.core.pipeline.PipelineRequest>
- uid: azure.cosmos.user_agent_policy.CosmosUserAgentPolicy.on_response
  name: on_response
  summary: Is executed after the request comes back from the policy.
  signature: 'on_response(request: PipelineRequest[HTTPRequestType], response: PipelineResponse[HTTPRequestType,
    HTTPResponseType]) -> None | Awaitable[None]'
  parameters:
  - name: request
    description: Request to be modified after returning from the policy.
    isRequired: true
    types:
    - <xref:azure.core.pipeline.PipelineRequest>
  - name: response
    description: Pipeline response object
    isRequired: true
    types:
    - <xref:azure.core.pipeline.PipelineResponse>
attributes:
- uid: azure.cosmos.user_agent_policy.CosmosUserAgentPolicy.user_agent
  name: user_agent
  summary: The current user agent value.
  return:
    description: The current user agent value.
    types:
    - <xref:str>
