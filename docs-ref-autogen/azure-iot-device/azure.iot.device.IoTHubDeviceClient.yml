### YamlMime:PythonClass
uid: azure.iot.device.IoTHubDeviceClient
name: IoTHubDeviceClient
fullName: azure.iot.device.IoTHubDeviceClient
module: azure.iot.device
inheritances:
- azure.iot.device.iothub.sync_clients.GenericIoTHubClient
- azure.iot.device.iothub.abstract_clients.AbstractIoTHubDeviceClient
summary: 'A synchronous device client that connects to an Azure IoT Hub instance.


  Intended for usage with Python 2.7 or compatibility scenarios for Python 3.5.3+.'
constructor:
  syntax: IoTHubDeviceClient(mqtt_pipeline, http_pipeline)
methods:
- uid: azure.iot.device.IoTHubDeviceClient.connect
  name: connect
  summary: 'Connects the client to an Azure IoT Hub or Azure IoT Edge Hub instance.


    The destination is chosen based on the credentials passed via the auth_provider
    parameter

    that was provided when this object was initialized.


    This is a synchronous call, meaning that this function will not return until the
    connection

    to the service has been completely established.'
  signature: connect()
- uid: azure.iot.device.IoTHubDeviceClient.create_from_connection_string
  name: create_from_connection_string
  summary: 'Instantiate the client from a IoTHub device or module connection string.



    broker. If no other messages are being exchanged, this controls the

    rate at which the client will send ping messages to the broker.

    If not provided default value of 60 secs will be used.'
  signature: create_from_connection_string(connection_string, **kwargs)
  parameters:
  - name: cls
    isRequired: true
  - name: connection_string
    isRequired: true
  return:
    description: An instance of an IoTHub client that uses a connection string for
      authentication.
- uid: azure.iot.device.IoTHubDeviceClient.create_from_symmetric_key
  name: create_from_symmetric_key
  summary: 'Instantiate a client using symmetric key authentication.



    broker. If no other messages are being exchanged, this controls the

    rate at which the client will send ping messages to the broker.

    If not provided default value of 60 secs will be used.'
  signature: create_from_symmetric_key(symmetric_key, hostname, device_id, **kwargs)
  parameters:
  - name: cls
    isRequired: true
  - name: symmetric_key
    isRequired: true
  - name: hostname
    isRequired: true
  - name: device_id
    isRequired: true
  return:
    description: An instance of an IoTHub client that uses a symmetric key for authentication.
- uid: azure.iot.device.IoTHubDeviceClient.create_from_x509_certificate
  name: create_from_x509_certificate
  summary: 'Instantiate a client which using X509 certificate authentication.



    broker. If no other messages are being exchanged, this controls the

    rate at which the client will send ping messages to the broker.

    If not provided default value of 60 secs will be used.'
  signature: create_from_x509_certificate(x509, hostname, device_id, **kwargs)
  parameters:
  - name: cls
    isRequired: true
  - name: x509
    isRequired: true
  - name: hostname
    isRequired: true
  - name: device_id
    isRequired: true
  return:
    description: An instance of an IoTHub client that uses an X509 certificate for
      authentication.
- uid: azure.iot.device.IoTHubDeviceClient.disconnect
  name: disconnect
  summary: 'Disconnect the client from the Azure IoT Hub or Azure IoT Edge Hub instance.


    It is recommended that you make sure to call this function when you are completely
    done

    with the your client instance.


    This is a synchronous call, meaning that this function will not return until the
    connection

    to the service has been completely closed.'
  signature: disconnect()
- uid: azure.iot.device.IoTHubDeviceClient.get_storage_info_for_blob
  name: get_storage_info_for_blob
  summary: Sends a POST request over HTTP to an IoTHub endpoint that will return information
    for uploading via the Azure Storage Account linked to the IoTHub your device is
    connected to.
  signature: get_storage_info_for_blob(blob_name)
  parameters:
  - name: blob_name
    description: The name in string format of the blob that will be uploaded using
      the storage API. This name will be used to generate the proper credentials for
      Storage, and needs to match what will be used with the Azure Storage SDK to
      perform the blob upload.
    isRequired: true
    types:
    - <xref:str>
  return:
    description: 'A JSON-like (dictionary) object from IoT Hub that will contain relevant
      information including: correlationId, hostName, containerName, blobName, sasToken.'
- uid: azure.iot.device.IoTHubDeviceClient.get_twin
  name: get_twin
  summary: 'Gets the device or module twin from the Azure IoT Hub or Azure IoT Edge
    Hub service.


    This is a synchronous call, meaning that this function will not return until the
    twin

    has been retrieved from the service.'
  signature: get_twin()
  return:
    description: Complete Twin as a JSON dict
    types:
    - <xref:dict>
- uid: azure.iot.device.IoTHubDeviceClient.notify_blob_upload_status
  name: notify_blob_upload_status
  summary: When the upload is complete, the device sends a POST request to the IoT
    Hub endpoint with information on the status of an upload to blob attempt. This
    is used by IoT Hub to notify listening clients.
  signature: notify_blob_upload_status(correlation_id, is_success, status_code, status_description)
  parameters:
  - name: correlation_id
    description: Provided by IoT Hub on get_storage_info_for_blob request.
    isRequired: true
    types:
    - <xref:str>
  - name: is_success
    description: A boolean that indicates whether the file was uploaded successfully.
    isRequired: true
    types:
    - <xref:bool>
  - name: status_code
    description: A numeric status code that is the status for the upload of the fiel
      to storage.
    isRequired: true
    types:
    - <xref:int>
  - name: status_description
    description: A description that corresponds to the status_code.
    isRequired: true
    types:
    - <xref:str>
- uid: azure.iot.device.IoTHubDeviceClient.patch_twin_reported_properties
  name: patch_twin_reported_properties
  summary: 'Update reported properties with the Azure IoT Hub or Azure IoT Edge Hub
    service.


    This is a synchronous call, meaning that this function will not return until the
    patch

    has been sent to the service and acknowledged.


    If the service returns an error on the patch operation, this function will raise
    the

    appropriate error.'
  signature: patch_twin_reported_properties(reported_properties_patch)
  parameters:
  - name: reported_properties_patch
    description: Twin Reported Properties patch as a JSON dict
    isRequired: true
    types:
    - <xref:dict>
  exceptions:
  - type: azure.iot.device.exceptions.CredentialError
  - type: azure.iot.device.exceptions.ConnectionFailedError
  - type: azure.iot.device.exceptions.ConnectionDroppedError
  - type: azure.iot.device.exceptions.ClientError
- uid: azure.iot.device.IoTHubDeviceClient.receive_message
  name: receive_message
  summary: 'Receive a message that has been sent from the Azure IoT Hub.


    Deprecated since version 2.3.0: We recommend that you use the .on_message_received
    property to set a handler instead'
  signature: receive_message(block=True, timeout=None)
  parameters:
  - name: block
    description: Indicates if the operation should block until a message is received.
    isRequired: true
    types:
    - <xref:bool>
  - name: timeout
    description: Optionally provide a number of seconds until blocking times out.
    isRequired: true
    types:
    - <xref:int>
  return:
    description: 'Message that was sent from the Azure IoT Hub, or None if

      no method request has been received by the end of the blocking period.'
    types:
    - <xref:azure.iot.device.Message>
    - <xref:None>
- uid: azure.iot.device.IoTHubDeviceClient.receive_method_request
  name: receive_method_request
  summary: 'Receive a method request via the Azure IoT Hub or Azure IoT Edge Hub.


    Deprecated since version 2.3.0: We recommend that you use the .on_method_request_received
    property to set a handler instead'
  signature: receive_method_request(method_name=None, block=True, timeout=None)
  parameters:
  - name: method_name
    description: 'Optionally provide the name of the method to receive requests for.

      If this parameter is not given, all methods not already being specifically targeted
      by

      a different request to receive_method will be received.'
    defaultValue: None
    types:
    - <xref:str>
  - name: block
    description: Indicates if the operation should block until a request is received.
    defaultValue: 'True'
    types:
    - <xref:bool>
  - name: timeout
    description: Optionally provide a number of seconds until blocking times out.
    defaultValue: None
    types:
    - <xref:int>
  return:
    description: 'MethodRequest object representing the received method request, or
      None if

      no method request has been received by the end of the blocking period.'
- uid: azure.iot.device.IoTHubDeviceClient.receive_twin_desired_properties_patch
  name: receive_twin_desired_properties_patch
  summary: "Receive a desired property patch via the Azure IoT Hub or Azure IoT Edge\
    \ Hub.\n\nThis is a synchronous call, which means the following:\n1. If block=True,\
    \ this function will block until one of the following happens:\n\n\n   * a desired\
    \ proprety patch is received from the Azure IoT Hub or Azure IoT Edge Hub. \n\n\
    \   * the timeout period, if provided, elapses.  If a timeout happens, this function\
    \ will raise a InboxEmpty exception \n\n\n2. If block=False, this function will\
    \ return any desired property patches which may have been received by the pipeline,\
    \ but not yet returned to the application.  If no desired property patches have\
    \ been received by the pipeline, this function will raise an InboxEmpty exception\
    \ \n\n\nDeprecated since version 2.3.0: We recommend that you use the .on_twin_desired_properties_patch_received\
    \ property to set a handler instead"
  signature: receive_twin_desired_properties_patch(block=True, timeout=None)
  parameters:
  - name: block
    description: Indicates if the operation should block until a request is received.
    defaultValue: 'True'
    types:
    - <xref:bool>
  - name: timeout
    description: Optionally provide a number of seconds until blocking times out.
    defaultValue: None
    types:
    - <xref:int>
  return:
    description: 'Twin Desired Properties patch as a JSON dict, or None if no patch
      has been

      received by the end of the blocking period'
    types:
    - <xref:dict>
    - <xref:None>
- uid: azure.iot.device.IoTHubDeviceClient.send_message
  name: send_message
  summary: 'Sends a message to the default events endpoint on the Azure IoT Hub or
    Azure IoT Edge Hub instance.


    This is a synchronous event, meaning that this function will not return until
    the event

    has been sent to the service and the service has acknowledged receipt of the event.


    If the connection to the service has not previously been opened by a call to connect,
    this

    function will open the connection before sending the event.'
  signature: send_message(message)
  parameters:
  - name: message
    description: 'The actual message to send. Anything passed that is not an instance
      of the

      Message class will be converted to Message object.'
    isRequired: true
    types:
    - <xref:azure.iot.device.Message>
    - <xref:str>
  exceptions:
  - type: azure.iot.device.exceptions.CredentialError
  - type: azure.iot.device.exceptions.ConnectionFailedError
  - type: azure.iot.device.exceptions.ConnectionDroppedError
  - type: azure.iot.device.exceptions.ClientError
- uid: azure.iot.device.IoTHubDeviceClient.send_method_response
  name: send_method_response
  summary: 'Send a response to a method request via the Azure IoT Hub or Azure IoT
    Edge Hub.


    This is a synchronous event, meaning that this function will not return until
    the event

    has been sent to the service and the service has acknowledged receipt of the event.


    If the connection to the service has not previously been opened by a call to connect,
    this

    function will open the connection before sending the event.'
  signature: send_method_response(method_response)
  parameters:
  - name: method_response
    description: The MethodResponse to send.
    isRequired: true
    types:
    - <xref:azure.iot.device.MethodResponse>
  exceptions:
  - type: azure.iot.device.exceptions.CredentialError
  - type: azure.iot.device.exceptions.ConnectionFailedError
  - type: azure.iot.device.exceptions.ConnectionDroppedError
  - type: azure.iot.device.exceptions.ClientError
attributes:
- uid: azure.iot.device.IoTHubDeviceClient.on_message_received
  name: on_message_received
  summary: 'The handler function that will be called when a message is received.


    The function definition should take one positional argument (the

    <xref:azure.iot.device.Message> object)'
